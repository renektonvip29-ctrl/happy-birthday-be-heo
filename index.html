<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday B√© Heo üéÇ</title>
  <meta name="description" content="A tiny one‚Äëfile website to wish happy birthday and write a heartfelt letter." />
  <style>
    :root{
      --bg: #0b0b12;
      --card: #141427;
      --accent: #a78bfa; /* lavender */
      --accent-2:#f472b6; /* pink */
      --text: #eef2ff;
      --muted:#b6b8d6;
      --ring: 0 0 0 3px rgba(167,139,250,.35);
    }
    html,body{height:100%}
    body{
      margin:0; font:400 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text); background: radial-gradient(1200px 600px at 70% -10%, rgba(167,139,250,.25), transparent 60%), radial-gradient(1000px 600px at 20% -30%, rgba(244,114,182,.20), transparent 55%), var(--bg);
      overflow-x:hidden;
    }
    .container{max-width:980px;margin:0 auto;padding:24px}
    header.hero{position:relative; padding:80px 24px 48px; text-align:center}
    .badge{display:inline-block; padding:8px 12px; border-radius:999px; background:rgba(167,139,250,.18); color:#e9d5ff; font-size:15px; letter-spacing:.08em; text-transform:uppercase}
    h1{font-size:42px; line-height:1.1; margin:14px 0 10px; letter-spacing:.2px}
    .receiver{font-size:36px; font-weight:800; letter-spacing:.2px; margin:12px 0 8px; color:var(--text)}
    .receiver .name{color:var(--accent)}
    .subtitle{color:var(--muted); margin:0 auto; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .cta-row{margin-top:26px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap}
    button, .ghost{
      appearance:none; border:none; cursor:pointer; border-radius:14px; padding:12px 16px; font-weight:600; transition:.2s transform, .2s filter, .2s background;
    }
    .btn{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:white; box-shadow:0 10px 25px rgba(167,139,250,.35)}
    .ghost{background:rgba(255,255,255,.06); color:var(--text); border:1px solid rgba(255,255,255,.08)}
    button:active{transform:translateY(1px)}

    .card{background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); border-radius:20px; padding:20px}

    /* Letter */
    #letter{max-width:820px; margin:26px auto; padding:0 24px}
    .letter-box{position:relative; overflow:hidden}
    .letter-title{display:flex; align-items:center; justify-content:center; gap:10px; margin:0 0 10px}
    .letter-title h2{margin:0; font-size:22px}
    .letter-content{max-height:0; overflow:hidden; transition:max-height .5s ease;}
    .letter-content.open{max-height:600px}
    .letter-inner{white-space:pre-wrap; color:#e7e7ff}

    /* Gallery */
    #gallery{max-width:920px; margin:30px auto 60px; padding:0 24px}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:14px}
    .img{aspect-ratio:1/1; border-radius:16px; background:#222436; position:relative; overflow:hidden; outline:1px solid rgba(255,255,255,.07); display:flex; align-items:center; justify-content:center}
    .img img{width:100%; height:100%; object-fit:cover; display:block}
    .img.missing{background:#1e2130; color:#8b8ea9; font-size:12px; text-align:center; padding:8px} 
    .img::after{content:""; position:absolute; inset:0; background:linear-gradient(180deg,transparent,rgba(0,0,0,.25)); opacity:0; transition:.25s}
    .img:hover::after{opacity:1}

    /* Music chip */
    .music{position:fixed; right:16px; bottom:16px; background:rgba(20,20,39,.9); backdrop-filter:blur(8px); border:1px solid rgba(255,255,255,.10); border-radius:999px; padding:10px 14px; display:flex; align-items:center; gap:10px}
    .dot{width:8px;height:8px;border-radius:50%; background:#ef4444; box-shadow:0 0 0 0 rgba(239,68,68,.6); animation:pulse 2s infinite}
    .playing{background:#22c55e}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(239,68,68,.6)}70%{box-shadow:0 0 0 12px rgba(239,68,68,0)}100%{box-shadow:0 0 0 0 rgba(239,68,68,0)}}

    /* Type line */
    .typing{font-weight:600; font-size:18px; color:#e9d5ff; min-height:28px}

    /* Gift button hearts */
    .hearts{position:fixed; inset:0; pointer-events:none}
    .heart{position:absolute; width:16px; height:16px; transform:translate(-50%,-50%);}

    /* Footer note */
    footer{opacity:.7; text-align:center; font-size:12px; margin:30px 0 60px}

    /* Mobile tweaks */
    @media (max-width:600px){
      h1{font-size:34px}
      .container{padding:18px}
      .receiver{font-size:24px}
      .subtitle{white-space:normal}
    }
  </style>
</head>
<body>
  <canvas id="confetti" class="hearts"></canvas>

  <header class="hero">
    <div class="container">
      <span class="badge">HAPPY BIRTHDAY</span>
      <div class="receiver">G·ª≠i <span class="name">B√© Heo</span></div>
      <h1>ch√∫c em sinh nh·∫≠t th·∫≠t d·ªãu d√†ng</h1>
      <p class="subtitle">M·ªôt trang nh·ªè ƒë·ªÉ anh n√≥i ƒëi·ªÅu mu·ªën n√≥i, l∆∞u l·∫°i v√†i t·∫•m ·∫£nh m√¨nh th√≠ch, v√† g·ª≠i em t·∫•t c·∫£ th∆∞∆°ng m·∫øn.</p>
      <div class="typing" id="typing"></div>
      <div class="cta-row">
        <button id="openLetter" class="btn">ƒê·ªçc th∆∞ c·ªßa anh</button>
      </div>
    </div>
  </header>

  <section id="letter" class="container">
    <div class="card letter-box">
      <div class="letter-title">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M3 7l9 6 9-6" stroke="#c4b5fd" stroke-width="1.5"/><path d="M20 7v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7" stroke="#c4b5fd" stroke-width="1.5"/></svg>
        <h2>L√° th∆∞ g·ª≠i em</h2>
      </div>
      <div id="letterContent" class="letter-content">
        <div class="letter-inner" id="letterText"></div>
      </div>
    </div>
  </section>

  <section id="gallery" class="container">
    <div class="card">
      <h2 style="margin:0 0 12px; text-align:center">Kho·∫£nh kh·∫Øc c·ªßa t·ª•i m√¨nh</h2>
      <div style="display:flex; justify-content:center; margin:6px 0 14px; gap:8px">
        <input id="filePicker" type="file" accept="image/*" multiple hidden>
        <button id="pickBtn" class="ghost">Th√™m ·∫£nh</button>
      </div>
      <div class="grid" id="grid"></div>
    </div>
  </section>

  <footer class="container">
    <p>Made with ‚ô• cho B√© Heo ‚Äî ho·∫°t ƒë·ªông t·ªët tr√™n ƒëi·ªán tho·∫°i.</p>
  </footer>

  <div class="music" id="musicCtl" role="button" aria-label="Play/Pause music">
    <div class="dot" id="status"></div>
    <span id="trackLabel">Nh·∫°c: off</span>
  </div>
  <audio id="audio" preload="none"></audio>
  <div id="ytplayer" style="position:absolute;left:-9999px;width:1px;height:1px;"></div>

<script>
  /* =====================
     0) CONFIG ‚Äî CH·ªàNH ·ªû ƒê√ÇY
  ====================== */
  const RECEIVER = "B√© Heo";            // T√™n ng∆∞·ªùi nh·∫≠n ƒë·ªÉ hi·ªÉn th·ªã
  const GREET_LINES = [                  // C√¢u ch·∫°y ki·ªÉu g√µ ch·ªØ
    "Ch√∫c em tu·ªïi m·ªõi an l√†nh v√† r·ª±c r·ª°.",
    "C·∫£m ∆°n em ƒë√£ bi·∫øn ng√†y th∆∞·ªùng c·ªßa anh th√†nh ng√†y c√≥ n·∫Øng.",
    "Mong t·ª•i m√¨nh quan t√¢m nhau h∆°n m·ªôt ch√∫t m·ªói ng√†y."
  ];
  const LETTER = `G·ª≠i ${RECEIVER}.

Ch√∫c m·ª´ng sinh nh·∫≠t ng∆∞·ªùi con g√°i anh th∆∞∆°ng. Ch√∫c em ng√†y h√¥m nay m·ªôt ng√†y ƒë·∫∑c bi·ªát thi·ªát l√† vui v·∫ª v√† h·∫°nh ph√∫c, c≈©ng nh∆∞ nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp, nh·ªØng ƒëi·ªÅu em mong mu·ªën v√† nh·ªØng ƒëi·ªÅu ·∫•y s·∫Ω ƒë·∫øn v·ªõi em c√πng b∆∞·ªõc sang m·ªôt tu·ªïi m·ªõi th·∫≠t nhi·ªÅu ƒëi·ªÅu ƒë·∫πp ƒë·∫Ω nhoa.

Anh c≈©ng c·∫£m ∆°n em v√¨ em ƒë√£ ƒë·∫øn v√† khi·∫øn nh·ªØng ng√†y th∆∞·ªùng c√¥ ƒë∆°n bu·ªìn t·∫ª c·ªßa anh tr·ªü n√™n th·∫≠t h·∫°nh ph√∫c khi c√≥ em b√™n c·∫°nh trong kho·∫£ng th·ªùi gian ·∫•y. hmm anh c≈©ng kh√¥ng bi·∫øt n√≥i sao n·ªØa, C√≥ nh·ªØng l√∫c anh th·∫•y m√¨nh h∆°i‚Ä¶ nh·ªõ em nhi·ªÅu h∆°n m·ªôt ch√∫t. Anh h·∫°nh ph√∫c nh·∫•t l√† khi ƒë∆∞·ª£c ·ªü c·∫°nh em, ƒëi ch∆°i g·∫ßn g≈©i v·ªõi nhau, ƒë∆∞·ª£c em quan t√¢m nhi·ªÅu h∆°n m·ªôt ch√∫t.
Anh mong r·∫±ng ch√∫ng ta s·∫Ω d√†nh ƒë∆∞·ª£c nhi·ªÅu th·ªùi gian cho nhau nhi·ªÅu h∆°n, ƒë·ªÉ c√≥ th·ªÉ th·∫•u hi·ªÉu nhau nhi·ªÅu h∆°n, nh·∫±m l√∫c anh m·ªát m·ªèi √≥ th√¨ anh ∆∞·ªõc g√¨ c√≥ ƒë∆∞·ª£c em b√™n c·∫°nh v·ªó v·ªÅ anh nh∆∞ m·ªôt ƒë·ª©a tr·∫ª v√† ƒë∆∞·ª£c em quan t√¢m h·ªèi thƒÉm nhi·ªÅu h∆°n m·ªôt ch√∫t.

Ch√∫c em tu·ªïi m·ªõi an l√†nh, l√†m ƒëi·ªÅu em y√™u theo c√°ch em mu·ªën. V·ªõi anh em l√† t·∫•t c·∫£, Anh c≈©ng mong r·∫±ng ng√†y n√†y nƒÉm sau, anh v·∫´n c√≥ th·ªÉ g·ª≠i ƒë∆∞·ª£c ƒë·∫øn t·ªõi em nh·ªØng l·ªùi l·∫Ω y√™u th∆∞∆°ng v√† tr√¢n th√†nh thi·ªát s·∫øn s√∫a n√†y, t·ª´ t·∫≠n ƒë√°y l√≤ng c·ªßa anh. Nhi·ªÅu l√∫c anh h∆°i v√¥ tri, anh h∆°i √≠t n√≥i, v√† anh c≈©ng l√† m·ªôt ƒë·ª©a tr·∫ª h∆°i d·ªÖ b·ªã t·ªïn th∆∞∆°ng nh∆∞ng m·ªçi ƒëi·ªÅu y√™u th∆∞∆°ng v√† t·ªët ƒë·∫πp nh·∫•t th√¨ anh lu√¥n c·ªë g·∫Øng ƒë·ªÉ d√†nh cho em ƒë·∫•y, c√¥ g√°i b√© nh·ªè c·ªßa anhh.

Th∆∞∆°ng em.`;
  const photos = [
    "att.-7uZycYbwMhIv9-Kt1reyroJKSt75Wa1gi1TweHgBqY.jpg",
    "IMG_0130.JPG",
    "IMG_20230127_162151.jpg",
    "Messenger_creation_1295876017919998.jpeg",
    "Messenger_creation_1898644697150201.jpeg"
  ]; // ƒë·ªïi t√™n ·∫£nh cho ƒë√∫ng

  /* 1) Typewriter */
  const typingEl = document.getElementById('typing');
  let i=0, j=0, del=false;
  function loopType(){
    const text = GREET_LINES[i%GREET_LINES.length];
    typingEl.textContent = text.slice(0, j);
    if(!del){ j++; if(j>text.length+8){ del=true } }
    else { j--; if(j===0){ del=false; i++ } }
    setTimeout(loopType, 60);
  }
  loopType();

  /* 2) Letter open/close */
  const btn = document.getElementById('openLetter');
  const box = document.getElementById('letterContent');
  const text = document.getElementById('letterText');
  text.textContent = LETTER;
  btn.addEventListener('click',()=>{
    const opening = !box.classList.contains('open');
    box.classList.toggle('open');
    btn.textContent = box.classList.contains('open')? 'ƒê√≥ng th∆∞' : 'ƒê·ªçc th∆∞ c·ªßa anh';
    if(opening){
      const x = innerWidth/2, y = innerHeight*.25; 
      spawnConfetti(x,y); spawnConfetti(x-120,y+20); spawnConfetti(x+120,y+20);
      ensurePlay();
      window.scrollTo({top: document.getElementById('letter').offsetTop-10, behavior:'smooth'});
    }
  });

  /* 3) Gallery render */
  const grid = document.getElementById('grid');
  function renderPhotos(list){
    grid.innerHTML='';
    list.forEach(src=>{
      const wrap=document.createElement('div'); wrap.className='img';
      const im=new Image(); im.loading='lazy'; im.decoding='async'; im.alt='photo'; im.src=src;
      im.onerror=()=>{ wrap.classList.add('missing'); wrap.textContent='(Ch∆∞a t√¨m th·∫•y ·∫£nh: '+src+')'; };
      wrap.appendChild(im);
      wrap.addEventListener('click',()=>{ if(im.src && !wrap.classList.contains('missing')) window.open(im.src,'_blank'); });
      grid.appendChild(wrap);
    });
  }
  renderPhotos(photos);

  // N√∫t ch·ªçn ·∫£nh t·ª´ m√°y
  const pickBtn = document.getElementById('pickBtn');
  const filePicker = document.getElementById('filePicker');
  if(pickBtn && filePicker){
    pickBtn.addEventListener('click',()=> filePicker.click());
    filePicker.addEventListener('change',()=>{
      const files=[...filePicker.files].filter(f=>/^image\//.test(f.type));
      if(files.length){ const urls = files.map(f=>URL.createObjectURL(f)); renderPhotos(urls); }
    });
  }

  // Drag & drop ·∫£nh v√†o khung
  document.addEventListener('dragover',e=>{e.preventDefault()});
  document.addEventListener('drop',e=>{ e.preventDefault(); const files=[...e.dataTransfer.files].filter(f=>/^image\//.test(f.type)); if(files.length){ const urls=files.map(f=>URL.createObjectURL(f)); renderPhotos(urls); }});

  /* 4) Music control ‚Äî YouTube background with aggressive autoplay */
  const musicCtl = document.getElementById('musicCtl');
  const status = document.getElementById('status');
  const label = document.getElementById('trackLabel');
  let ytScriptLoaded=false, ytReady=false, ytPlayer=null, wantPlay=false, triedAuto=false;
  const YT_VIDEO_ID = "vhVBWw6rId0"; // your track

  function loadYT(){ if(ytScriptLoaded) return; ytScriptLoaded=true; const tag=document.createElement('script'); tag.src='https://www.youtube.com/iframe_api'; document.body.appendChild(tag); }
  function isPlaying(){ try { return ytReady && ytPlayer && ytPlayer.getPlayerState()===YT.PlayerState.PLAYING; } catch(e){ return false } }
  function updateChip(){ if(isPlaying()){ status.classList.add('playing'); label.textContent='Nh·∫°c: on'; } else { status.classList.remove('playing'); label.textContent='Nh·∫°c: off'; } }

  window.onYouTubeIframeAPIReady = function(){
    ytPlayer = new YT.Player('ytplayer', {
      height:'1', width:'1', videoId: YT_VIDEO_ID,
      playerVars:{controls:0, modestbranding:1, rel:0, loop:1, playlist:YT_VIDEO_ID, autoplay:1, playsinline:1, mute:1},
      events:{
        onReady:()=>{
          ytReady=true;
          // Try to start immediately at low volume
          try{ ytPlayer.setVolume(35); ytPlayer.playVideo(); setTimeout(()=>{ try{ ytPlayer.unMute(); ytPlayer.setVolume(35);}catch(e){} }, 300); }catch(e){}
          if(wantPlay){ try{ ytPlayer.unMute(); ytPlayer.setVolume(35); ytPlayer.playVideo(); }catch(e){} }
          updateChip();
        },
        onStateChange: updateChip
      }
    });
  };

  function ensurePlay(){ wantPlay=true; loadYT(); if(ytReady && ytPlayer){ try{ ytPlayer.unMute(); ytPlayer.setVolume(35); ytPlayer.playVideo(); }catch(e){} } updateChip(); }
  function togglePlay(){ loadYT(); if(isPlaying()) { try{ ytPlayer.pauseVideo(); }catch(e){} } else { ensurePlay(); } }

  // Try autoplay on load + first interactions
  function tryAutoStart(){ if(triedAuto) return; triedAuto=true; loadYT(); ensurePlay(); }
  document.addEventListener('DOMContentLoaded', ()=>{ setTimeout(tryAutoStart, 300); });
  window.addEventListener('load', ()=> setTimeout(tryAutoStart, 800));
  window.addEventListener('scroll', tryAutoStart, {once:true});
  window.addEventListener('pointerdown', ()=>{ wantPlay=true; ensurePlay(); }, {once:true});
  window.addEventListener('touchstart', ()=>{ wantPlay=true; ensurePlay(); }, {once:true});

  musicCtl.addEventListener('click',togglePlay);

  /* 5) Confetti engine */
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let W,H; function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight } resize(); addEventListener('resize',resize);
  const pieces=[];
  function spawnConfetti(x,y){
    for(let k=0;k<140;k++){
      pieces.push({x:x+(Math.random()*40-20), y:y+(Math.random()*40-20), r:2+Math.random()*4, c: `hsl(${Math.random()*360},95%,70%)`, vx:(Math.random()-0.5)*6, vy:Math.random()*-6-2, g:0.15, life:120+Math.random()*40})
    }
  }
  function tick(){
    ctx.clearRect(0,0,W,H);
    for(let i=pieces.length-1;i>=0;i--){
      const p=pieces[i]; p.x+=p.vx; p.y+=p.vy; p.vy+=p.g; p.life--; if(p.life<0||p.y>H+20){ pieces.splice(i,1); continue }
      ctx.beginPath(); ctx.fillStyle=p.c; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(tick);
  } tick();
</script>
</body>
</html>
